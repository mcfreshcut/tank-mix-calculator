
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Round 5 Tank Mix Calculator</title>
<style>
  :root { --bg:#0b0c10; --card:#15171c; --muted:#8a9099; --accent:#32cd32; --text:#e6e9ef; --border:#262a32; --warn:#f87171; }
  body { background: var(--bg); color: var(--text); font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; margin: 24px; }
  h1 { font-size: 22px; margin-bottom: 12px; }
  .card { background: var(--card); border: 1px solid var(--border); border-radius: 14px; padding: 16px; max-width: 820px; }
  .row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 12px; }
  label { font-weight: 600; display: block; margin-bottom: 6px; color: var(--muted); }
  input { width: 100%; padding: 12px; background:#0f1115; color: var(--text); border: 1px solid var(--border); border-radius: 10px; font-size: 14px; }
  button { padding: 12px 16px; border: 0; background: var(--accent); color: #000; border-radius: 10px; cursor: pointer; font-weight: 600; }
  button:hover { filter: brightness(1.1); }
  .outputs { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px; margin-top: 16px; }
  .pill { background:#0f1115; border:1px solid var(--border); border-radius: 12px; padding: 14px; }
  .title { font-size: 12px; color: var(--muted); text-transform: uppercase; letter-spacing: .06em; margin-bottom: 6px; }
  .big { font-size: 22px; font-weight: 800; }
  .sub { margin-top: 6px; color: var(--muted); font-size: 12px; }
  .muted { color: var(--muted); font-size: 12px; margin-top: 12px; }
  .hr { height:1px; background: var(--border); margin: 12px 0; border:0; }
  .banner { margin-top:16px; padding:12px; border-radius:10px; background:#2a1212; border:1px solid var(--warn); color:var(--warn); font-size:13px; line-height:1.4; }
</style>
</head>
<body>
  <h1>Round 5 Tank Mix Calculator</h1>
  <div class="card">
    <div class="row">
      <div>
        <label>Total tank capacity (gal)</label>
        <input id="tank" type="number" value="300" step="0.1" min="1">
      </div>
      <div>
        <label>Already in tank (gal)</label>
        <input id="existing" type="number" value="50" step="0.1" min="0">
      </div>
    </div>
    <button onclick="calc()">Calculate</button>
    <div class="muted">
      Fixed per FULL tank (non‑negotiable): Coron = <b>5.4 bottles</b> @ <b>2.5 gal</b> (13.5 gal total), OnDeck = <b>134 oz</b>, Iron = <b>300 oz</b> (2 oz/k over 150k sqft).
    </div>
    <div class="hr"></div>
    <div id="outputs" class="outputs"></div>
    <div id="notes" class="muted"></div>
    <div class="banner">
      ⚠️ Best Practices Reminder:<br>
      • This calculator is for convenience only.<br>
      • You are responsible for calibration and label compliance.<br>
      • Always measure and calibrate equipment.<br>
      • Follow fertilizer & weed control laws, avoid drift, respect buffer zones.
    </div>
  </div>

<script>
const CORON_BOTTLES_FULL = 5.4;
const CORON_BOTTLE_GAL = 2.5;
const CORON_GAL_FULL = CORON_BOTTLES_FULL * CORON_BOTTLE_GAL; // 13.5 gal
const ONDECK_OZ_FULL = 134;
const IRON_OZ_FULL = 300; // 2 oz/k * 150k sqft

function toGalOz(totalOz){
  const gal = Math.floor(totalOz / 128);
  const oz = Math.round(totalOz - gal * 128);
  return {gal, oz, totalOz: Math.round(totalOz)};
}
function toOzGal(totalGal){
  const galWhole = Math.floor(totalGal);
  const oz = Math.round((totalGal - galWhole) * 128);
  return {gal: galWhole, oz};
}
function coronBottles(gal){
  const bottles = gal / CORON_BOTTLE_GAL;
  const full = Math.floor(bottles);
  const remainderBottles = bottles - full;
  const remainderGal = remainderBottles * CORON_BOTTLE_GAL;
  const rem = toOzGal(remainderGal);
  return {bottles, full, remGal: rem.gal, remOz: rem.oz};
}
function fmt(n, d=2){ return Number(n).toFixed(d); }

function calc(){
  const tank = parseFloat(document.getElementById('tank').value || 0);
  const existing = parseFloat(document.getElementById('existing').value || 0);

  const outputs = document.getElementById('outputs');
  const notes = document.getElementById('notes');
  outputs.innerHTML = ""; notes.textContent = "";

  if (tank <= 0 || existing < 0 || existing >= tank){
    notes.textContent = "Check inputs: existing must be less than tank; tank must be > 0.";
    return;
  }

  const scale = (tank - existing) / tank;

  // Coron
  const coronAddGal = CORON_GAL_FULL * scale;
  const coronGalOz = toOzGal(coronAddGal);
  const cb = coronBottles(coronAddGal);

  // OnDeck
  const ondeckAddOz = ONDECK_OZ_FULL * scale;
  const ondeckGalOz = toGalOz(ondeckAddOz);

  // Iron
  const ironAddOz = IRON_OZ_FULL * scale;
  const ironGalOz = toGalOz(ironAddOz);

  const block = (title, bigLine, subLine) => `
    <div class="pill">
      <div class="title">${title}</div>
      <div class="big">${bigLine}</div>
      <div class="sub">${subLine}</div>
    </div>
  `;

  outputs.innerHTML = [
    block("Coron to add",
          `${coronGalOz.gal} gal ${coronGalOz.oz} oz`,
          `= ${fmt(coronAddGal,2)} gal total • Bottles: ${fmt(cb.bottles,2)} (${cb.full} full + ${cb.remGal} gal ${cb.remOz} oz)`),
    block("OnDeck to add",
          `${ondeckGalOz.gal} gal ${ondeckGalOz.oz} oz`,
          `= ${fmt(ondeckAddOz,0)} oz total`),
    block("Iron to add",
          `${ironGalOz.gal} gal ${ironGalOz.oz} oz`,
          `= ${fmt(ironAddOz,0)} oz total (2 oz/k × 150k sqft)`)
  ].join("");

  notes.innerHTML = `Scale factor = (tank - existing) / tank = (${Math.round(tank)} - ${Math.round(existing)}) / ${Math.round(tank)} = <b>${fmt(scale,3)}</b>. Fill with water to ${Math.round(tank)} gal total.`;
}

window.onload = calc;
</script>
</body>
</html>
